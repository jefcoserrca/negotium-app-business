<ion-header>
  <ion-toolbar color="dark">
    <ion-buttons slot="start">
      <ion-button fill="clear" color="light" (click)="close()">
        <ion-icon slot="icon-only" name="chevron-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Seleccionar cliente</ion-title>
  </ion-toolbar>
</ion-header>
<ion-content>
  <div class="d-flex align-items-center justify-content-around mt-2">
    <ion-searchbar
      placeholder="Buscar"
      [debounce]="250"
      mode="ios"
      [(ngModel)]="searchTerm"
      (ionChange)="searchByTerm()"
    ></ion-searchbar>
    <ion-button fill="clear" color="secondary" (click)="openCreatNewClient()">
      <ion-icon slot="icon-only" name="add-circle"></ion-icon>
    </ion-button>
  </div>
  <ion-list>
    <ion-item button (click)="selectUser(null)">
      <ion-label>Ninguno</ion-label>
    </ion-item>
    <ion-item
      *ngFor="let client of clients; let i = index"
      button
      (click)="selectUser(client)"
    >
      <ion-avatar
        class="d-flex justify-content-center align-items-center me-3"
        [ngStyle]="{
          background: client.style.bgColor,
          color: client.style.txtColor
        }"
      >
        <span> {{ client.label }} </span>
      </ion-avatar>
      <ion-label>
        <h3>{{ client.name }}</h3>
        <p>{{ client.phone }}</p>
      </ion-label>
    </ion-item>
  </ion-list>
  <div class="mt-5 p-5 text-center" *ngIf="!clients?.length && !showLoading">
    <h4>Sin Clientes</h4>
    <p>
      Añade clientes a tu base de datos, los clientes tambíen se pueden generar
      automáticamente al registrarse.
    </p>
    <ion-button class="mt-3" (click)="openCreatNewClient()">
      Crear cliente
    </ion-button>
  </div>
</ion-content>
